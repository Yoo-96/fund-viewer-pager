import{r as l,c as a,w as e,i as s,o as u,a as d,l as t,e as o,I as c,b as n,F as f,d as r,t as _,n as v,u as i,f as m}from"./index-BlAqsvHz.js";import{f as z,H as p,d as g}from"./common.BPyV1BJk.js";import{_ as h,s as w,d as y}from"./_plugin-vue_export-helper.DH9QaRbE.js";const k=h({__name:"index",setup(h){const k=l([]),E=l(!1),j=l(null),C=l(null),b=l(),D=z,O=g(async()=>{if(!b.value)return k.value=[],void(E.value=!1);if(b.value.length<3)return k.value=[],void(E.value=!1);const l=await w(b.value),a=[];for(const s of l)try{const l=s.CODE,e=await y(l);a.push({...s,fundcode:(null==e?void 0:e.fundcode)||l,name:(null==e?void 0:e.name)||s.NAME,gsz:(null==e?void 0:e.gsz)||"--",dwjz:(null==e?void 0:e.dwjz)||"--",gszzl:(null==e?void 0:e.gszzl)||"--",gztime:(null==e?void 0:e.gztime)||"--"})}catch(e){a.push({...s,fundcode:s.CODE,name:s.NAME,gsz:"--",dwjz:"--",gszzl:"--",gztime:"--"})}k.value=a,E.value=!0},500),x=()=>{O()};return(l,z)=>{const g=t,h=s,w=c;return u(),a(h,{class:"page"},{default:e(()=>[d(h,{class:"header"},{default:e(()=>[d(h,{class:"header-top"},{default:e(()=>[d(g,{class:"title"},{default:e(()=>[o("基金搜索")]),_:1})]),_:1}),d(h,{class:"search"},{default:e(()=>[d(w,{modelValue:b.value,"onUpdate:modelValue":z[0]||(z[0]=l=>b.value=l),placeholder:"请输入至少3位基金代码/名称",onInput:x},null,8,["modelValue"])]),_:1})]),_:1}),d(h,{class:"list"},{default:e(()=>[(u(!0),n(f,null,r(k.value,l=>(u(),a(h,{key:l.fundcode||l.CODE,class:"card"},{default:e(()=>[d(h,{class:"row top"},{default:e(()=>[d(h,null,{default:e(()=>[d(h,{class:"name"},{default:e(()=>[o(_(l.name||l.NAME),1)]),_:2},1024),d(h,{class:"code"},{default:e(()=>[o(_(l.fundcode||l.CODE),1)]),_:2},1024)]),_:2},1024),void 0!==l.gszzl?(u(),a(h,{key:0,class:v(["change",Number(l.gszzl)>=0?"up":"down"])},{default:e(()=>[o(_(i(D)(l.gszzl)),1)]),_:2},1032,["class"])):(u(),a(h,{key:1,class:"change"},{default:e(()=>[o("--")]),_:1}))]),_:2},1024),d(h,{class:"row bottom"},{default:e(()=>[d(h,{class:"col"},{default:e(()=>[d(g,{class:"label"},{default:e(()=>[o("估算")]),_:1}),d(g,{class:"value"},{default:e(()=>[o(_(l.gsz||"--"),1)]),_:2},1024)]),_:2},1024),d(h,{class:"col"},{default:e(()=>[d(g,{class:"label"},{default:e(()=>[o("净值")]),_:1}),d(g,{class:"value"},{default:e(()=>[o(_(l.dwjz||"--"),1)]),_:2},1024)]),_:2},1024),d(h,{class:"time"},{default:e(()=>[o(_(l.gztime||"--"),1)]),_:2},1024)]),_:2},1024),d(h,{class:"add-btn",onClick:a=>(l=>{var a;C.value=l,null==(a=j.value)||a.open(l.CODE)})(l)},{default:e(()=>[o(" 添加到持仓 ")]),_:2},1032,["onClick"])]),_:2},1024))),128)),0===k.value.length&&E.value?(u(),a(h,{key:0,class:"empty"},{default:e(()=>[o(" 未找到相关基金 ")]),_:1})):m("",!0),E.value?m("",!0):(u(),a(h,{key:1,class:"empty"},{default:e(()=>[o(" 请输入基金代码或名称进行搜索 ")]),_:1}))]),_:1}),d(p,{ref_key:"holderSelectorRef",ref:j},null,512)]),_:1})}}},[["__scopeId","data-v-5a1c5fc7"]]);export{k as default};
