var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(o,t,r)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,c=(e,o,t)=>new Promise((r,n)=>{var s=e=>{try{c(t.next(e))}catch(o){n(o)}},a=e=>{try{c(t.throw(e))}catch(o){n(o)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,a);c((t=t.apply(e,o)).next())});import{z as i,A as l,B as d,s as m}from"./index-DvadhCu2.js";let u=Promise.resolve();const w=e=>(u=u.then(()=>(e=>new Promise((o,t)=>{const r="jsonpgz",n=document.createElement("script"),s=setTimeout(()=>{delete window[r],a(),t(new Error("请求超时"))},1e4);window[r]=e=>{clearTimeout(s),a(),o(e||{})};const a=()=>{delete window[r],n.remove()};n.onerror=()=>{delete window[r],clearTimeout(s),a(),t(new Error("网络错误"))},n.src=`https://fundgz.1234567.com.cn/js/${e}.js?rt=${Date.now()}`,document.head.appendChild(n)}))(e)).catch(e=>Promise.resolve(null)),u),p=(...e)=>c(void 0,[...e],function*(e=[]){const o=[];for(const r of e)try{const e=yield w(r);o.push(e)}catch(t){o.push(null)}return o}),f=e=>new Promise((o,t)=>{const r=`SuggestData_${Date.now()}`,n=`https://fundsuggest.eastmoney.com/FundSearch/api/FundSearchAPI.ashx?m=1&key=${encodeURIComponent(e)}&callback=${r}&_=${Date.now()}`,s=document.createElement("script"),a=setTimeout(()=>{c(),t(new Error("请求超时"))},1e4);window[r]=e=>{if(clearTimeout(a),c(),e&&e.Datas){const t=e.Datas.filter(e=>700===e.CATEGORY||"700"===e.CATEGORY||"基金"===e.CATEGORYDESC);o(t)}else o([])};const c=()=>{delete window[r],s.remove()};s.onerror=()=>{clearTimeout(a),c(),t(new Error("网络错误"))},s.src=n,document.head.appendChild(s)}),E=()=>new Promise((e,o)=>{e([{id:"USER-A",name:"A持仓"},{id:"USER-B",name:"B持仓"}])}),h=()=>new Promise((e,o)=>{const t=i("FUND_LIST");t?e(JSON.parse(t)):l({url:"./static/funds.json",method:"GET",dataType:"json",success:t=>{200===t.statusCode?(e(t.data),d("FUND_LIST",JSON.stringify(t.data))):o(new Error(`请求失败: ${t.statusCode}`))},fail:e=>{console.error("请求基金列表失败:",e),o(new Error("网络请求失败"))}})}),O=(e,c)=>new Promise((l,u)=>{const w=i("FUND_LIST");if(w){const i=JSON.parse(w),u=i[c]||[];if(u.some(o=>o.code===e))return m({title:"基金已存在",icon:"none"});const f=[...u,{code:e}],E=(p=((e,o)=>{for(var t in o||(o={}))n.call(o,t)&&a(e,t,o[t]);if(r)for(var t of r(o))s.call(o,t)&&a(e,t,o[t]);return e})({},i),o(p,t({[c]:f})));d("FUND_LIST",JSON.stringify(E)),l(E)}else u(new Error("添加失败"));var p}),y=()=>new Promise((e,o)=>c(void 0,null,function*(){const o=i("DEFAULT_HOLDER");if(o)e(o);else{const o=(yield E())[0].id;d("DEFAULT_HOLDER",o),e(o)}})),D=e=>new Promise((o,t)=>{d("DEFAULT_HOLDER",e),o(!0)}),T=(e,o)=>{const t=e.__vccOpts||e;for(const[r,n]of o)t[r]=n;return t};export{T as _,y as a,p as b,D as c,w as d,O as e,h as f,E as g,f as s};
