import{z as e,A as o,B as s,s as t}from"./index-_NgTnr_e.js";let n=Promise.resolve();const r=e=>(n=n.then(()=>(e=>new Promise((o,s)=>{const t="jsonpgz",n=document.createElement("script"),r=setTimeout(()=>{delete window[t],a(),s(new Error("请求超时"))},1e4);window[t]=e=>{clearTimeout(r),a(),o(e||{})};const a=()=>{delete window[t],n.remove()};n.onerror=()=>{delete window[t],clearTimeout(r),a(),s(new Error("网络错误"))},n.src=`https://fundgz.1234567.com.cn/js/${e}.js?rt=${Date.now()}`,document.head.appendChild(n)}))(e)).catch(e=>Promise.resolve(null)),n),a=async(e=[])=>{const o=[];for(const t of e)try{const e=await r(t);o.push(e)}catch(s){o.push(null)}return o},c=e=>new Promise((o,s)=>{const t=`SuggestData_${Date.now()}`,n=`https://fundsuggest.eastmoney.com/FundSearch/api/FundSearchAPI.ashx?m=1&key=${encodeURIComponent(e)}&callback=${t}&_=${Date.now()}`,r=document.createElement("script"),a=setTimeout(()=>{c(),s(new Error("请求超时"))},1e4);window[t]=e=>{if(clearTimeout(a),c(),e&&e.Datas){const s=e.Datas.filter(e=>700===e.CATEGORY||"700"===e.CATEGORY||"基金"===e.CATEGORYDESC);o(s)}else o([])};const c=()=>{delete window[t],r.remove()};r.onerror=()=>{clearTimeout(a),c(),s(new Error("网络错误"))},r.src=n,document.head.appendChild(r)}),i=()=>new Promise((e,o)=>{e([{id:"USER-A",name:"A持仓"},{id:"USER-B",name:"B持仓"}])}),d=()=>new Promise((t,n)=>{const r=e("FUND_LIST");r?t(JSON.parse(r)):o({url:"/static/funds.json",method:"GET",dataType:"json",success:e=>{200===e.statusCode?(t(e.data),s("FUND_LIST",JSON.stringify(e.data))):n(new Error(`请求失败: ${e.statusCode}`))},fail:e=>{console.error("请求基金列表失败:",e),n(new Error("网络请求失败"))}})}),m=(o,n)=>new Promise((r,a)=>{const c=e("FUND_LIST");if(c){const e=JSON.parse(c),a=e[n]||[];if(a.some(e=>e.code===o))return t({title:"基金已存在",icon:"none"});const i=[...a,{code:o}],d={...e,[n]:i};s("FUND_LIST",JSON.stringify(d)),r(d)}else a(new Error("添加失败"))}),w=()=>new Promise(async(o,t)=>{const n=e("DEFAULT_HOLDER");if(n)o(n);else{const e=(await i())[0].id;s("DEFAULT_HOLDER",e),o(e)}}),l=e=>new Promise((o,t)=>{s("DEFAULT_HOLDER",e),o(!0)}),u=(e,o)=>{const s=e.__vccOpts||e;for(const[t,n]of o)s[t]=n;return s};export{u as _,w as a,a as b,l as c,r as d,m as e,d as f,i as g,c as s};
